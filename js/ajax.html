<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- <img src="https://images.dog.ceo/breeds/corgi-cardigan/n02113186_6300.jpg" /> -->
</body>
<script>
    function myajax(options) {
        return new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest();
            const type = (options.type || "GET").toUpperCase();
            const data = options.data;
            const url = options.url;
            console.log(options);
            xhr.open(type, url, true);

            if (type === "GET") {
                xhr.send();
            } else {
                xhr.send(data);
            }
            xhr.addEventListener("readystatechange", function() {
                if (xhr.readyState === 4) {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        resolve(xhr.responseText, xhr.responseType)
                    } else {
                        reject(this.status);
                    }
                }
            })


            // xhr.onreadystatechange = function() {
            //     if (xhr.readyState === 4) {
            //         if (xhr.status >= 200 && xhr.status < 300) {
            //             options.success && options.success(xhr.responseText, xhr.responseXML);
            //         } else {
            //             options.error && options.error(xhr.responseText);
            //         }
            //     }
            // };
        })
    }
    const obj = {
        url: "https://dog.ceo/api/breeds/image/random",
        data: null,
        type: "GET",
    };
    myajax(obj).then(res => {
        const message = JSON.parse(res).message;
        console.log(message);
        const img = document.createElement("img")
        img.setAttribute("src", message);
        document.body.appendChild(img)
    })
</script>

</html>